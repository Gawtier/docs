---
title: "Single Sign-On (SSO)"
description: "Enable Single Sign-On with SAML 2.0 to authenticate users through your existing identity provider"
---

## Overview

Single Sign-On (SSO) allows users to access Forest Admin using their existing corporate credentials through your identity provider (IdP). This centralizes authentication, improves security, and provides a better user experience.

<Info>
This feature may not be available on all plans. Check the [pricing page](https://www.forestadmin.com/pricing) for more information, or [contact us](https://www.forestadmin.com/contact) to enable it for your organization.
</Info>

## Benefits of SSO

<CardGroup cols={2}>
  <Card title="Centralized Authentication" icon="key">
    Users authenticate once through your IdP and access Forest Admin seamlessly
  </Card>

  <Card title="Enhanced Security" icon="shield-check">
    Leverage your IdP's security features: MFA, conditional access, device policies
  </Card>

  <Card title="Simplified Onboarding" icon="user-plus">
    New employees automatically get Forest Admin access through your IdP provisioning
  </Card>

  <Card title="Instant Offboarding" icon="user-minus">
    Disabling a user in your IdP immediately revokes Forest Admin access
  </Card>
</CardGroup>

## Supported Identity Providers

Forest Admin supports any SAML 2.0-compliant identity provider:

<CardGroup cols={2}>
  <Card title="Google Workspace" icon="google" href="/product/control/authentication/sso-providers/google">
    Setup guide for Google Workspace SSO
  </Card>

  <Card title="Okta" icon="circle-check" href="/product/control/authentication/sso-providers/okta">
    Setup guide for Okta SSO
  </Card>

  <Card title="Azure AD / Entra ID" icon="microsoft" href="/product/control/authentication/sso-providers/azure">
    Setup guide for Microsoft Azure AD
  </Card>

  <Card title="AWS SSO" icon="aws" href="/product/control/authentication/sso-providers/aws">
    Setup guide for AWS IAM Identity Center
  </Card>

  <Card title="OneLogin" icon="fingerprint">
    SAML 2.0 compatible
  </Card>

  <Card title="Auth0" icon="lock">
    SAML 2.0 compatible
  </Card>

  <Card title="Ping Identity" icon="id-badge">
    SAML 2.0 compatible
  </Card>

  <Card title="Generic SAML" icon="diagram-project" href="/product/control/authentication/sso-providers/generic-saml">
    Any SAML 2.0-compliant IdP
  </Card>
</CardGroup>

## How SSO Works

SSO with Forest Admin uses the SAML 2.0 protocol:

```
┌─────────┐           ┌─────────────┐           ┌────────────┐
│  User   │           │   Forest    │           │ Identity   │
│         │           │   Admin     │           │ Provider   │
└────┬────┘           └──────┬──────┘           └──────┬─────┘
     │                       │                         │
     │  1. Access Forest     │                         │
     ├──────────────────────>│                         │
     │                       │                         │
     │  2. SAML Request      │                         │
     │<──────────────────────┤                         │
     │                       │                         │
     │  3. Login at IdP      │                         │
     ├───────────────────────┼────────────────────────>│
     │                       │                         │
     │  4. SAML Response     │                         │
     │<──────────────────────┼─────────────────────────┤
     │                       │                         │
     │  5. Session Created   │                         │
     ├──────────────────────>│                         │
     │                       │                         │
     │  6. Access Granted    │                         │
     │<──────────────────────┤                         │
     │                       │                         │
```

### SAML Flow Explained

<Steps>
  <Step title="User Access">
    User navigates to your Forest Admin URL
  </Step>

  <Step title="SAML Request">
    Forest Admin generates a SAML authentication request and redirects to your IdP
  </Step>

  <Step title="IdP Authentication">
    User authenticates with your IdP (including MFA if configured)
  </Step>

  <Step title="SAML Response">
    IdP sends a signed SAML assertion back to Forest Admin with user attributes
  </Step>

  <Step title="Session Creation">
    Forest Admin validates the SAML assertion and creates a session
  </Step>

  <Step title="Access Granted">
    User is logged in and can access Forest Admin based on their role
  </Step>
</Steps>

## Setting Up SSO

### Prerequisites

Before configuring SSO, ensure you have:

- Admin access to Forest Admin
- Admin access to your identity provider
- User email addresses in both systems match

### Configuration Steps

<Steps>
  <Step title="Enable SSO in Forest Admin">
    1. Go to **Project Settings** > **Authentication** > **SSO**
    2. Click **Enable SSO**
    3. Note the **ACS URL** and **Entity ID** (you'll need these for IdP configuration)
  </Step>

  <Step title="Configure Your Identity Provider">
    Create a new SAML application in your IdP:

    - **Application Name**: Forest Admin
    - **ACS URL**: Copy from Forest Admin settings
    - **Entity ID**: Copy from Forest Admin settings
    - **Name ID Format**: Email Address
    - **Signature Algorithm**: SHA-256 (recommended)

    Configure attribute mapping (see below)
  </Step>

  <Step title="Upload IdP Metadata to Forest Admin">
    Option A: **Metadata URL** (recommended)
    - Copy the metadata URL from your IdP
    - Paste it into Forest Admin SSO settings

    Option B: **Upload XML File**
    - Download metadata XML from your IdP
    - Upload to Forest Admin SSO settings
  </Step>

  <Step title="Test the Connection">
    1. Click **Test SSO** in Forest Admin
    2. You'll be redirected to your IdP
    3. Log in with a test account
    4. Verify successful authentication
  </Step>

  <Step title="Configure User Provisioning">
    Choose how users are created:

    - **Just-in-Time (JIT) Provisioning**: Automatically create users on first login
    - **Manual Provisioning**: Pre-create users before they can log in
    - **SCIM Provisioning**: Sync users automatically (see [SCIM documentation](/product/control/authentication/scim))
  </Step>

  <Step title="Enforce SSO (Optional)">
    Once tested, enforce SSO-only login:
    - Disable password-based authentication
    - Keep one admin account with password access for emergency
  </Step>
</Steps>

## Attribute Mapping

SAML assertions contain user information that Forest Admin maps to user profiles:

### Required Attributes

| SAML Attribute | Forest Admin Field | Description |
|----------------|-------------------|-------------|
| `email` or `NameID` | Email | User's email address (must match) |

### Optional Attributes

| SAML Attribute | Forest Admin Field | Use Case |
|----------------|-------------------|----------|
| `firstName` or `givenName` | First Name | User's first name |
| `lastName` or `surname` | Last Name | User's last name |
| `role` | Role | Auto-assign role (e.g., "editor", "admin") |
| `teams` | Teams | Auto-assign team memberships |
| `department` | Tags | Custom user metadata |

### Attribute Configuration Example

<Tabs>
  <Tab title="Google Workspace">
    ```xml
    <!-- In Google Admin Console -->
    <saml:Attribute Name="email">
      <saml:AttributeValue>{primary_email}</saml:AttributeValue>
    </saml:Attribute>

    <saml:Attribute Name="firstName">
      <saml:AttributeValue>{first_name}</saml:AttributeValue>
    </saml:Attribute>

    <saml:Attribute Name="lastName">
      <saml:AttributeValue>{last_name}</saml:AttributeValue>
    </saml:Attribute>

    <saml:Attribute Name="role">
      <saml:AttributeValue>{department}</saml:AttributeValue>
    </saml:Attribute>
    ```
  </Tab>

  <Tab title="Okta">
    ```xml
    <!-- In Okta SAML Settings -->
    <saml2:Attribute Name="email">
      <saml2:AttributeValue>${user.email}</saml2:AttributeValue>
    </saml2:Attribute>

    <saml2:Attribute Name="firstName">
      <saml2:AttributeValue>${user.firstName}</saml2:AttributeValue>
    </saml2:Attribute>

    <saml2:Attribute Name="lastName">
      <saml2:AttributeValue>${user.lastName}</saml2:AttributeValue>
    </saml2:Attribute>

    <saml2:Attribute Name="teams">
      <saml2:AttributeValue>${user.department}</saml2:AttributeValue>
    </saml2:Attribute>
    ```
  </Tab>

  <Tab title="Azure AD">
    ```xml
    <!-- In Azure AD Application Claims -->
    <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress">
      <AttributeValue>user.mail</AttributeValue>
    </Attribute>

    <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname">
      <AttributeValue>user.givenname</AttributeValue>
    </Attribute>

    <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname">
      <AttributeValue>user.surname</AttributeValue>
    </Attribute>

    <Attribute Name="role">
      <AttributeValue>user.department</AttributeValue>
    </Attribute>
    ```
  </Tab>
</Tabs>

## User Provisioning

### Just-in-Time (JIT) Provisioning

Automatically create users when they first log in via SSO:

<Steps>
  <Step title="Enable JIT Provisioning">
    In Forest Admin SSO settings, enable **Automatic User Creation**
  </Step>

  <Step title="Configure Default Role">
    Set the default role for new users (e.g., "Viewer" for safety)
  </Step>

  <Step title="Map Role from IdP (Optional)">
    Map the `role` SAML attribute to automatically assign appropriate roles
  </Step>

  <Step title="First Login">
    When a user logs in for the first time:
    1. Forest Admin verifies SAML assertion
    2. Creates user account with email from assertion
    3. Assigns default or mapped role
    4. User can immediately access Forest Admin
  </Step>
</Steps>

<Info>
**Role Mapping**: If you map roles from your IdP, ensure the role names match exactly (case-sensitive). Otherwise, the default role is assigned.
</Info>

### Manual Provisioning

Pre-create users before they can log in:

1. Add users in **Project Settings** > **Teams** > **Users**
2. User email must match their IdP email
3. User logs in via SSO
4. Forest Admin matches by email and grants access

### SCIM Provisioning

Automatically sync users from your IdP. See [SCIM Documentation](/product/control/authentication/scim) for setup.

## Enforcing SSO

Once SSO is configured and tested, you can enforce SSO-only authentication:

<Warning>
**Emergency Access**: Always keep at least one admin account with password authentication enabled. This ensures you can access Forest Admin if SSO has issues.
</Warning>

<Steps>
  <Step title="Test Thoroughly">
    Verify all users can log in successfully via SSO
  </Step>

  <Step title="Notify Users">
    Inform users that password login will be disabled
  </Step>

  <Step title="Enable SSO Enforcement">
    Go to **Project Settings** > **Authentication** > **Enforcement**

    Enable: **Require SSO for all users**
  </Step>

  <Step title="Configure Exceptions">
    Optionally allow specific users to bypass SSO (emergency access accounts)
  </Step>
</Steps>

### Enforcement Options

<Tabs>
  <Tab title="Strict Enforcement">
    **All users must use SSO**

    - Password login disabled for everyone
    - Only one emergency admin account with password
    - Maximum security

    **Use Case**: Large enterprises with strict security policies
  </Tab>

  <Tab title="Role-Based Enforcement">
    **SSO required for specific roles**

    - Internal employees use SSO
    - External contractors use password
    - Flexible for mixed environments

    **Use Case**: Organizations with external partners
  </Tab>

  <Tab title="Optional SSO">
    **SSO available but not required**

    - Users can choose SSO or password
    - Gradual transition period
    - Least restrictive

    **Use Case**: During SSO rollout phase
  </Tab>
</Tabs>

## Troubleshooting

### SAML Configuration Issues

<AccordionGroup>
  <Accordion title="Error: Invalid SAML Response">
    **Possible Causes**:
    - Clock skew between Forest Admin and IdP (check time sync)
    - Invalid signature (check certificate)
    - Wrong ACS URL configured in IdP

    **Solution**:
    1. Verify ACS URL in IdP matches Forest Admin
    2. Ensure IdP certificate is valid and not expired
    3. Check IdP and Forest Admin server times are synchronized
  </Accordion>

  <Accordion title="Error: User Email Not Found">
    **Possible Causes**:
    - Email in SAML assertion doesn't match Forest Admin user
    - JIT provisioning is disabled
    - Email attribute not mapped correctly

    **Solution**:
    1. Check email in SAML assertion (use browser dev tools)
    2. Verify user exists with exact email match
    3. Enable JIT provisioning or create user manually
  </Accordion>

  <Accordion title="User Can't Access After Login">
    **Possible Causes**:
    - User created but has no role assigned
    - User's role has no permissions
    - Scope filters exclude all data for user

    **Solution**:
    1. Verify user has appropriate role
    2. Check role permissions
    3. Review scope configuration
  </Accordion>

  <Accordion title="Redirect Loop">
    **Possible Causes**:
    - Multiple SSO configurations conflict
    - IdP misconfigured
    - Browser cookies/cache issues

    **Solution**:
    1. Clear browser cookies and cache
    2. Verify only one SSO configuration is active
    3. Check IdP logs for errors
  </Accordion>
</AccordionGroup>

### Certificate Issues

**Certificate Expired**:
```
Error: Certificate expired, SAML assertion validation failed
```

**Solution**:
1. Update certificate in your IdP
2. Download new metadata
3. Update metadata in Forest Admin

**Certificate Mismatch**:
```
Error: Signature verification failed
```

**Solution**:
1. Ensure Forest Admin has the correct IdP metadata
2. Verify certificate in SAML response matches IdP metadata
3. Check for multiple certificates (use the correct one)

### Testing Tools

Use SAML debugging tools to diagnose issues:

<CardGroup cols={2}>
  <Card title="SAML Tracer (Browser Extension)" icon="magnifying-glass">
    Capture and inspect SAML requests and responses in real-time
  </Card>

  <Card title="SAML Decoder" icon="code">
    Decode base64-encoded SAML assertions to view contents
  </Card>

  <Card title="IdP Logs" icon="file-lines">
    Check your IdP's logs for authentication errors and warnings
  </Card>

  <Card title="Forest Admin Logs" icon="list">
    Review Forest Admin audit logs for SSO authentication events
  </Card>
</CardGroup>

## Security Best Practices

### Certificate Management

<CardGroup cols={2}>
  <Card title="Use SHA-256" icon="shield">
    Configure your IdP to sign assertions with SHA-256 (not SHA-1)
  </Card>

  <Card title="Monitor Expiration" icon="calendar-xmark">
    Set reminders to renew certificates before expiration
  </Card>

  <Card title="Rotate Certificates" icon="arrows-rotate">
    Update certificates annually or per your security policy
  </Card>

  <Card title="Secure Metadata" icon="lock">
    Protect IdP metadata and private keys
  </Card>
</CardGroup>

### Access Control

1. **Limit IdP Access**: Only authorize users who need Forest Admin access
2. **Use Groups**: Assign Forest Admin access to IdP groups, not individual users
3. **Regular Reviews**: Audit SSO access quarterly
4. **MFA Required**: Enforce multi-factor authentication in your IdP
5. **Conditional Access**: Use IdP conditional access policies (device compliance, location)

### Monitoring

- **Track Login Events**: Monitor SSO logins in [audit logs](/product/control/audit)
- **Alert on Failures**: Set up alerts for failed SSO attempts
- **Review Access**: Regularly review who has accessed Forest Admin via SSO
- **Test Regularly**: Periodically test SSO with different user accounts

## Advanced Configuration

### Multiple IdPs

Support users from different identity providers:

```
Company A users → Okta SSO
Company B users → Azure AD SSO
Internal users → Google Workspace SSO
```

**Setup**:
1. Configure each IdP separately in Forest Admin
2. Use email domain routing to direct users to correct IdP
3. Map each IdP to appropriate teams/roles

### Custom Attribute Mapping

Map custom SAML attributes to Forest Admin user fields:

```javascript
// Custom attribute mapping configuration
{
  "attributeMapping": {
    "email": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress",
    "firstName": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname",
    "lastName": "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname",
    "role": "http://schemas.mycompany.com/ws/2024/identity/claims/forestadminrole",
    "department": "http://schemas.mycompany.com/ws/2024/identity/claims/department",
    "employeeId": "http://schemas.mycompany.com/ws/2024/identity/claims/employeeid"
  }
}
```

### IdP-Initiated vs SP-Initiated SSO

<Tabs>
  <Tab title="SP-Initiated (Recommended)">
    **User starts at Forest Admin**

    1. User goes to Forest Admin URL
    2. Clicks "Log in with SSO"
    3. Redirected to IdP
    4. Logs in and returns to Forest Admin

    **Advantages**: More secure, better user experience
  </Tab>

  <Tab title="IdP-Initiated">
    **User starts at IdP portal**

    1. User logs into IdP portal
    2. Clicks Forest Admin app icon
    3. Directly lands in Forest Admin

    **Advantages**: Convenient for users with many apps
    **Considerations**: Requires special IdP configuration
  </Tab>
</Tabs>

## Compliance Considerations

### GDPR

- Log all SSO authentications for audit trail
- Document IdP integration in data processing records
- Ensure IdP contract includes DPA (Data Processing Agreement)

### HIPAA

- Use SSO with MFA for all users accessing ePHI
- Implement automatic session timeouts
- Log all authentication events with timestamps

### SOC 2

- Document SSO configuration and change management
- Implement role-based access through IdP groups
- Regular access reviews and recertification

## Next Steps

<CardGroup cols={2}>
  <Card title="SCIM Provisioning" icon="users-gear" href="/product/control/authentication/scim">
    Automate user provisioning from your IdP
  </Card>

  <Card title="2FA Setup" icon="mobile-screen" href="/product/control/authentication/2fa">
    Add additional security with two-factor authentication
  </Card>

  <Card title="Teams & Roles" icon="user-group" href="/product/control/teams">
    Organize SSO users into teams with appropriate roles
  </Card>

  <Card title="Audit Logs" icon="clock-rotate-left" href="/product/control/audit">
    Monitor SSO authentication events
  </Card>
</CardGroup>
